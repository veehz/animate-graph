<!doctype html>
<html>

<head>
    <link rel="stylesheet" href="../dist/animate-graph.css" />
</head>

<body>
    <div id="graph-container" style="border: 1px solid #ccc; height: 800px"></div>
    <script type="module">
        import { Graph, Node } from "@veehz/animate-graph";

        const graph = new Graph("#graph-container", {
            height: document.getElementById("graph-container").clientHeight,
            width: document.getElementById("graph-container").clientWidth
        });

        const nodeA = new Node("n-a", "A", "input 1");
        const nodeB = new Node("n-b", "B", "input 2");

        graph.insertNode(nodeA);
        graph.insertNode(nodeB);

        setTimeout(() => {
            const nodeC = new Node("n-c", "C");
            // Node C depends on A and B (variables in scope)
            graph.insertNodeAfter(nodeC, [nodeA, nodeB]);
            console.log("Added Node C -> [A, B]");
        }, 1000);

        setTimeout(() => {
            const nodeD = new Node("n-d", "D");
            // Node D depends on A and B (variables in scope)
            graph.insertNodeAfter(nodeD, [nodeA, nodeB]);
            console.log("Added Node D -> [A, B]");
        }, 2000);

        setTimeout(() => {
            const nodeE = new Node("n-e", "E");
            // Node E depends on B (variable in scope)
            graph.insertNodeAfter(nodeE, [nodeB]);
            graph.label("n-b-n-e", "Depends on B");
            console.log("Added Node E -> [B]");
        }, 3000);

        setTimeout(() => {
            const nodeF = new Node("n-f", "F");
            // Node F depends on D and E which are NOT in scope here (in timeouts above)
            // Using IDs "n-d" and "n-e" to reference them
            graph.insertNodeAfter(nodeF, ["n-d", "n-e"]);
            console.log("Added Node F -> [D, E]");
        }, 4000);

        setTimeout(() => {
            graph.highlight("n-f");
            console.log("Highlighted Node F by ID");
        }, 5000);

        setTimeout(() => {
            graph.remove_highlight("n-f");
            console.log("Removed highlight from Node F by ID");
        }, 6000);

        setTimeout(() => {
            graph.highlight(nodeB);
            console.log("Highlighted Node B");
        }, 7000);

        setTimeout(() => {
            graph.highlight("n-a-n-c");
            console.log("Highlighted Edge A -> C");
        }, 8000);
    </script>
</body>

</html>